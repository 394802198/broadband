<!-- Customer Basic Details -->

<form id="customerEditForm" class="form-horizontal">
	<h4 class="text-success">Customer Identity</h4>
	<hr/>
	<div class="form-group">
		<label class="control-label col-md-4">Customer ID</label>
		<div class="col-md-4">
			<p class="form-control-static"><.=id.></p>
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-md-4">Customer Type</label>
		<div class="col-md-4">
			<p class="form-control-static"><.=customer_type.></p>
		</div>
	</div>
	
	<div class="form-group">
		<label class="control-label col-md-4">Identity Type</label>
		<div class="col-md-2">
			<select name="identity_type" id="identity_type" class="selectpicker show-tick form-control">
			<. var types = ['Driver Licence', 'Passport', '18+'];
				for(var i = 0; i < types.length; i++) {
					if (identity_type == types[i])
			.> 
				<option value="<.=types[i].>" selected="selected"><.=types[i].></option>
			<. 		else .>
				<option value="<.=types[i].>"><.=types[i].></option>
			<. 	}.>
			</select>
		</div>
	</div>
	
	<div class="form-group">
		<label for="identity_number" class="control-label col-md-4">Identity Number</label>
		<div class="col-md-4">
			<input type="text" id="identity_number" name="identity_number" value="<.=identity_number.>" class="form-control" data-error-field data-placement="right"/>
		</div>
	</div>
	
	<!-- personal -->
	<. if (customer_type == 'personal'){ .>
		
	<!-- customer address -->
	<hr/>
	<h4 class="text-success">Customer Address</h4>
	<hr/>
	
	<div class="form-group">
		<label for="address" class="control-label col-md-4">Customer Address</label>
		<div class="col-md-8">
			<input type="text" id="address" name="address" value="<.=address.>" class="form-control" data-error-field data-placement="top"/>
		</div>
	</div>

	<!-- customer account -->
	<hr/>
	<h4 class="text-success">Customer Account</h4>
	<hr/>
		
	<div class="form-group">
		<label for="cellphone" class="control-label col-md-4">Customer Mobile</label>
		<div class="col-md-4">
			<input type="text" id="cellphone" name="cellphone" value="<.=cellphone.>"class="form-control" placeholder="e.g.: 0210800123" data-error-field />
		</div>
	</div>
	<div class="form-group">
		<label for="email" class="control-label col-md-4">Customer Email</label>
		<div class="col-md-4">
			<input type="text" id="email" name="email" value="<.=email.>" class="form-control" placeholder="e.g.: welcome@cyberpark.co.nz" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="password" class="control-label col-md-4">Customer Password</label>
		<div class="col-md-4">
			<input type="text" id="password" name="password" value="<.=password.>" class="form-control" data-error-field/>
		</div>
	</div>

	<!-- Personal Information -->
	<hr/>
	<h4 class="text-success">Personal Information</h4>
	<hr/>
		
	<div class="form-group">
		<label for="title" class="control-label col-md-4">Title</label>
		<div class="col-md-2">
			<select name="title" id="title" class="selectpicker show-tick form-control">
			<. var types = ['Mr', 'Mrs', 'Ms'];
				for(var i = 0; i < types.length; i++) {
					if (title == types[i])
			.> 
				<option value="<.=types[i].>" selected="selected"><.=types[i].></option>
			<. 		else .>
				<option value="<.=types[i].>"><.=types[i].></option>
			<. 	}.>
			</select>
		</div>
	</div>
	<div class="form-group">
		<label for="first_name" class="control-label col-md-4">First name</label>
		<div class="col-md-4">
			<input type="text" id="first_name" name="first_name" value="<.=first_name.>" class="form-control" data-error-field />
		</div>
	</div>
	<div class="form-group">
		<label for="last_name" class="control-label col-md-4">Last name</label>
		<div class="col-md-4">
			<input type="text" id="last_name" name="last_name" value="<.=last_name.>" class="form-control" data-error-field />
		</div>
	</div>
	
	<.}.>
	
	<!-- business -->
	<. if (customer_type == 'business'){ .>
	
	<!-- customer address -->
	<hr/>
	<h4 class="text-success">Group/Organization Address</h4>
	<hr/>
	
	<div class="form-group">
		<label for="address" class="control-label col-md-4">Business Address</label>
		<div class="col-md-8">
			<input type="text" id="address" name="address" value="<.=address.>" class="form-control" data-error-field data-placement="top"/>
		</div>
	</div>

	<!-- customer account -->
	<hr/>
	<h4 class="text-success">Business Account</h4>
	<hr/>
	
	<div class="form-group">
		<label for="cellphone" class="control-label col-md-4">Business Mobile</label>
		<div class="col-md-4">
			<input type="text" id="cellphone" name="cellphone" value="<.=cellphone.>"class="form-control" placeholder="e.g.: 0210800123" data-error-field />
		</div>
	</div>
	<div class="form-group">
		<label for="email" class="control-label col-md-4">Business Email</label>
		<div class="col-md-4">
			<input type="text" id="email" name="email" value="<.=email.>" class="form-control" placeholder="e.g.: welcome@cyberpark.co.nz" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="password" class="control-label col-md-4">Business Password</label>
		<div class="col-md-4">
			<input type="text" id="password" name="password" value="<.=password.>" class="form-control" data-error-field/>
		</div>
	</div>
		
	<!-- Group/Organization Information -->
	<hr/>
	<h4 class="text-success">Group/Organization Information</h4>
	<hr/>
	
	<div class="form-group">
		<label for="organization.org_type" class="control-label col-md-4">Group/Organization Type</label>
		<div class="col-md-5">
			<select name="org_type" id="organization.org_type" class="selectpicker show-tick form-control" data-error-field>
			<. var orgTypes = [ 'NZ Incorporated Company','Limited Partnership','Sole Trader','Partnership', 'Trust','Overseas Company','Society'];
				for(var i = 0; i < orgTypes.length; i++) {
					if (organization.org_type == orgTypes[i])
			.> 
				<option value="<.=orgTypes[i].>" selected="selected"><.=orgTypes[i].></option>
			<. 		else .>
				<option value="<.=orgTypes[i].>"><.=orgTypes[i].></option>
			<. }.>
			</select>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.org_name" class="control-label col-md-4">Group/Organization Name</label>
		<div class="col-md-5">
			<input type="text" name="org_name" id="organization.org_name" value="<.=organization.org_name.>" class="form-control" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.org_trading_name" class="control-label col-md-4">Trading Name</label>
		<div class="col-md-5">
			<input type="text" name="org_trading_name" id="organization.org_trading_name" value="<.=organization.org_trading_name.>" class="form-control" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.org_register_no" class="control-label col-md-4">Registration No.</label>
		<div class="col-md-5">
			<input type="text" name="org_register_no" id="organization.org_register_no" value="<.=organization.org_register_no.>" class="form-control" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.org_incoporate_date" class="control-label col-md-4">Date Incorporated</label>
		<div class="col-md-4">
			<div class="input-group date">
		  		<input type="text" id="organization.org_incoporate_date" name="org_incoporate_date" value="<.=organization.org_incoporate_date_str.>" class="form-control" class="form-control"  data-error-field />
		  		<span class="input-group-addon">
		  			<i class="glyphicon glyphicon-calendar"></i>
		  		</span>
			</div>
		</div>
	</div>

	<!-- Contract Details -->
	<hr/>
	<h4 class="text-success">Contract Details / Holder Account</h4>
	<hr/>
	
	<div class="form-group">
		<label for="organization.holder_name" class="control-label col-md-4">Full name</label>
		<div class="col-md-5">
			<input type="text" name="holder_name" id="organization.holder_name" value="<.=organization.holder_name.>" class="form-control"  data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.holder_job_title" class="control-label col-md-4">Job title</label>
		<div class="col-md-5">
			<input type="text" name="holder_job_title" id="organization.holder_job_title" value="<.=organization.holder_job_title.>" class="form-control" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.holder_phone" class="control-label col-md-4">Phone Number</label>
		<div class="col-md-5">
			<input type="text" name="holder_phone" id="organization.holder_phone" value="<.=organization.holder_phone.>" class="form-control" data-error-field/>
		</div>
	</div>
	<div class="form-group">
		<label for="organization.holder_email" class="control-label col-md-4">Email Address</label>
		<div class="col-md-5">
			<input type="text" name="holder_email" id="organization.holder_email" value="<.=organization.holder_email.>" class="form-control" data-error-field/>
		</div>
	</div>

	<. } .>
	
	<!-- Other Information -->

	<hr/>
	<h4 class="text-success">Other Information</h4>
	<hr/>
	
	<div class="form-group">
		<label for="balance" class="control-label col-md-4">Credit</label>
		<div class="col-md-4">
			<. if(user_role == 'system-developer' || user_role == 'administrator' || user_role == 'accountant'){ .>
				<input type="text" id="balance" name="balance" value="<.=Number(balance).toFixed(2).>" class="form-control" data-error-field />
			<. } else { .>
				<input type="text" id="balance" name="balance" value="<.=Number(balance).toFixed(2).>" class="form-control" disabled="disabled" data-error-field />
			<. } .>
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-md-4">Register Date</label>
		<div class="col-md-4">
			<p class="form-control-static"><strong><.=register_date_str.></strong></p>
		</div>
	</div>
	
	<!-- Other options -->
	<hr/>
	<h4 class="text-success">Other Options</h4>
	<hr/>
	
	<div class="form-group">
		<label for="status" class="control-label col-md-4">Status</label>
		<div class="col-md-4">
			<select id="status" name="status" class="selectpicker show-tick form-control">
				<. if (status == 'active') .>
					<option value="active" selected="selected">Active</option>
				<. else .>
					<option value="active">Active</option>
				<. if (status == 'disabled') .>
					<option value="disabled" selected="selected">Disabled</option>
				<. else .>
					<option value="disabled" >Disabled</option>
			</select>
		</div>
	</div>
	
	<!-- button -->
	<hr/>
	<div class="form-group">
		<div class="col-md-4"></div>
		<div class="col-md-3">
			<a href="javascript:void(0);" class="btn btn-success btn-lg btn-block" id="updateCustomer" >Update Customer</a>
		</div>
		<div class="col-md-4">
			<. if(user_role == 'system-developer'){ .>
				<a class="btn btn-danger  btn-lg btn-block" data-toggle="modal" data-target="#deleteCustomerModal">Delete customer and related information</a>
			<. } .>
		</div>
	</div>
</form>

<!-- Delete Customer Modal -->
<form class="form-horizontal">
	<div class="modal fade" id="deleteCustomerModal" tabindex="-1" role="dialog" aria-labelledby="deleteCustomerModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h3 class="modal-title" id="deleteCustomerModalLabel">
						<strong class="text-danger">Delete Customer ( Permanent!!! )</strong>
					</h3>
				</div>
				<div class="modal-body">
					<p class="text-right">
						<strong class="text-danger">
							This operation is irreversible, be seriously careful!<br /> 
							Info related with this customer will be disappeared!<br />
						</strong> 
					</p>
					<p class="text-right">
						<strong>
							personal informations<br /> 
							related organization details<br />
							related orders with records<br />
							related invoices with records<br /> 
							related transaction records<br />
						</strong>
					</p>
				</div>
				<div class="modal-footer">
					<a href="<.=ctx.>/broadband-user/crm/customer/remove/<.= id .>" class="btn btn-warning btn-lg">Delete</a>
				</div>
			</div>
		</div>
	</div>
</form>


